<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <style type="text/css">
    h2 {
      text-align: center;
    }
    div {
      background-color: rgb(204,214,221);
      margin-left: auto;
      margin-right: auto;
      margin-top: 10px;
      margin-bottom: 10px;
      text-align:left;
      border: 2px solid;
      border-color: rgb(41,47,51);
      border-radius: 7px;
      width: 480px;
      height: 45px;

    }
    .time {
      text-align: right;
      position: relative;
      top: -4px;
      margin-right: 3px;
      font-family: sans-serif;
      font-size: 8pt;
    }
    .tweet {
      margin-left: -24px;
      list-style: none;
      text-align: left;
      position: relative;
      top: -16px;
    }
    .username {
      text-decoration: none;
      color: rgb(85,172,238);
      font-weight: bold;
    }

    </style>
    <title>Twittler</title>
  </head>
  <body>
    <h2>Twittler</h2>
    <script>

      $(document).ready(function(){
        //var $body = $('body');
        //$body.html('');

        //var index = streams.home.length - 1;
        //while(index >= 0){
          //var tweet = streams.home[index];
          //var $tweet = $('<div></div>');
          //$tweet.text(tweet.created_at + '@' + tweet.user + ': ' + tweet.message);
          //$tweet.appendTo($body);
          //index -= 1;
        //}

      //End of doc.ready f'n
      });

        //variables
        var $body = $('body');
        var index;
        var converters = {'Jan':'01','Feb':'02','Mar':'03','Apr':'04','May':'05','Jun':'06','Jul':'07','Aug':'08','Sep':'09','Oct':'10','Nov':'11','Dec':'12'};



        //Function to refresh data assigned to variable streams
        function refresh () {
          index = streams.home.length - 1;
        };


        //Changes dates to numerals
        function niceDates () {
          var date = streams.home[streams.home.length-1].created_at.toString().split(' ');
          var month = date[1];
          var result = '';
          for (key in converters) {
            if (converters[month] === converters[key]) {
              result += converters[key];
            }
          }
          return result += '\/' + date[2] + '\/' + date[3].slice(2,4) + ' ' + date[4];
        }


        //$body.html('');

        function showTweets () {
          refresh();
          $('div').remove();
          while(index >= streams.home.length-10){
            var tweet = streams.home[index];
            var link = 'http://www.twitter.com\/' + tweet.user + '\/';   
            var $tweet = $('<div></div>');
            var $username = $('<a>',{
             text: '@'+tweet.user,
             title: '@'+tweet.user,
             href: link
            }).addClass('username');
            var $message = $('<ul></ul>').addClass('tweet');
            var $dateAndTime = $('<li></li>').addClass('time');
            $username.appendTo($tweet);
            $message.text(tweet.message).appendTo($tweet);
            $dateAndTime.text(niceDates()).appendTo($message);
            $tweet.appendTo($body);
            index -= 1;
          };
        };

        //sets milisecond interval of running f'n

        //Command to rerun refresh function to get new tweets
        //window.setInterval(showTweets,200)

    </script>
  </body>
</html>
